<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Search Results</title>
</head>
<body>

  <h1>Search Results for "{{ query }}"</h1>

  <!-- Search Bar -->
  <form action="{% url 'core:search_results' %}" method="get">
    <input type="text" name="q" value="{{ query }}" placeholder="Search again...">
    <button type="submit">Search</button>
  </form>

  <hr>

  {% if results %}
    {% for doc in results %}
      <div>
        <h2>{{ doc.title }}</h2>
        <p><strong>Course:</strong> {{ doc.course }}</p>
        <p><strong>Uploaded By:</strong> {{ doc.uploaded_by.full_name }}</p>
        <p><strong>Description:</strong> {{ doc.description }}</p>
        <a href="{% url 'core:download' doc.id %}">Download</a>
      </div>
      <hr>
    {% endfor %}
  {% else %}
    <p>No results found.</p>
  {% endif %}

  <script>
    function search() {
      const query = document.getElementById('search').value.trim();
      if (query) {
        window.location.href = `/search-results?q=${encodeURIComponent(query)}`;
      }
    }

    // Populate the search bar from the URL query string
    window.onload = function() {
      const params = new URLSearchParams(window.location.search);
      const q = params.get('q');
      if (q) {
        document.getElementById('search').value = q;
      }
    };

  </script>

</body>
</html>


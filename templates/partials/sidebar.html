{% load static %}
<aside>
  <nav>
    <a href="/search"><i data-lucide="search"></i> Search</a>
    <a href="/upload"><i data-lucide="upload-cloud"></i> Uploads</a>
    <a href="/favorites"><i data-lucide="heart"></i> Favorites</a>
    <a href="/edit-profile"><i data-lucide="user"></i> Profile</a>
    <button
      class="nav-button toggle-dark"
      aria-label="Toggle dark mode"
      title="Toggle dark mode"
      type="button"
    >
      <i data-lucide="moon"></i> Dark Mode
    </button>
    <form id="logoutForm" method="post" action="{% url 'core:logout' %}" style="display: inline;">
      {% csrf_token %}
      <button type="submit" class="nav-button logout-button" title="Log out" aria-label="Log out">
        <i data-lucide="log-out"></i> Logout
      </button>
    </form>
  </nav>
</aside>
<script>
  function toggleDarkMode() {
    const body = document.body;
    body.classList.toggle("dark-mode");

    const isDark = body.classList.contains("dark-mode");
    localStorage.setItem("theme", isDark ? "dark" : "light");

    const darkToggle = document.querySelector('.toggle-dark');
    if (darkToggle) {
      darkToggle.innerHTML = isDark ? '<i data-lucide="sun"></i> Light Mode' : '<i data-lucide="moon"></i> Dark Mode';
      if (window.lucide) lucide.createIcons();
    }
  }

  // Initialize theme on page load
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme === "dark") {
    document.body.classList.add("dark-mode");
    const darkToggle = document.querySelector('.toggle-dark');
    if (darkToggle) {
      darkToggle.innerHTML = '<i data-lucide="sun"></i> Light Mode';
      if (window.lucide) lucide.createIcons();
    }
  }

  // Add event listener when DOM is loaded
  document.addEventListener('DOMContentLoaded', function() {
    const darkToggle = document.querySelector('.toggle-dark');
    if (darkToggle) {
      darkToggle.addEventListener('click', toggleDarkMode);
    }
  });
</script>


